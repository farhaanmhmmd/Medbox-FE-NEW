(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{30904:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/transactionDetail/[transaction_id]",function(){return c(47897)}])},56556:function(a,b,c){"use strict";var d=c(34727),e=c(34051),f=c.n(e),g=c(85893),h=c(67294),i=c(23887),j=c(47741),k=c(41664),l=c.n(k),m=c(33299);b.Z=function(a){var b=(0,h.useState)(a.session),c=b[0],e=b[1],k=(0,h.useState)(""),n=k[0],o=k[1];function p(){return(p=(0,d.Z)(f().mark(function a(){var b,c;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,m.getSession)();case 2:(b=a.sent)&&o(c=b.user.user.user_id),e(b);case 5:case"end":return a.stop()}},a)}))).apply(this,arguments)}return(0,h.useEffect)(function(){(function a(){return p.apply(this,arguments)})()},[]),(0,g.jsx)("div",{className:"h-[100px] flex items-end desktop:h-[72px] shadow-[0px_6px_20px_0px_rgba(0,28,47,0.05)]",children:(0,g.jsxs)("div",{className:"flex w-[100%] h-[70px] desktop:h-[100%] items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex ml-[7vw] h-[70%] items-center",children:[(0,g.jsx)(l(),{href:"/",children:(0,g.jsx)(i.Ee,{className:"hover:cursor-pointer",src:"/landingpage/Medbox.svg",alt:"medbox-logo",width:"20vh"})}),(0,g.jsxs)("div",{className:"desktop:flex ml-[5vw] justify-between w-[20vw] hidden",children:[(0,g.jsx)(l(),{href:"/",children:(0,g.jsx)("p",{className:"duration-300 ease-in-out bg-white text-[1vw] font-[500] hover:cursor-pointer hover:shadow-[0px_5px_0px_-2px_rgba(0,141,235,1)]",children:"Beranda"})}),(0,g.jsx)(l(),{href:"/productCatalog",children:(0,g.jsx)("p",{className:"duration-300 ease-in-out bg-white text-[1vw] font-[500] hover:cursor-pointer hover:shadow-[0px_5px_0px_-2px_rgba(0,141,235,1)]",children:"Toko Obat"})}),(0,g.jsx)(l(),{href:"/transaction/".concat(n),children:(0,g.jsx)("p",{className:"duration-300 ease-in-out bg-white text-[1vw] font-[500] hover:cursor-pointer hover:shadow-[0px_5px_0px_-2px_rgba(0,141,235,1)]",children:"Riwayat"})})]})]}),(0,g.jsx)("div",{className:"grow"}),(0,g.jsxs)("div",{className:"flex mr-[7vw] h-[70%] items-center w-[25vw] desktop:w-[10vw]",children:[(0,g.jsx)("div",{className:"w-[3.5vw] desktop:w-[1.2vw] hover:cursor-pointer ml-[4.5vw] desktop:ml-[2vw]",children:(0,g.jsx)(i.Ee,{src:"/landingpage/Bell.svg",alt:"bell-logo",width:"2vw"})}),(0,g.jsx)("div",{className:"w-[3.5vw] desktop:w-[1.2vw] hover:cursor-pointer ml-[4.5vw] desktop:ml-[2vw]",children:(0,g.jsx)(l(),{href:"/cart/".concat(n),children:(0,g.jsx)(i.Ee,{src:"/landingpage/Cart.svg",alt:"cart-logo",width:"2vw"})})}),(0,g.jsx)("div",{className:"desktop:hidden w-[3.5vw] desktop:w-[1.2vw] hover:cursor-pointer ml-[4.5vw] desktop:ml-[2vw]",children:(0,g.jsx)(i.Ee,{src:"/landingpage/Menu.svg",alt:"menu-logo",width:"2vw"})}),c?(0,g.jsx)("div",{className:"hidden desktop:inline w-[3.5vw] desktop:w-[1.2vw] hover:cursor-pointer ml-[4.5vw] desktop:ml-[2vw]",children:(0,g.jsx)(l(),{href:"/profile",children:(0,g.jsx)(i.Ee,{src:"/landingpage/Account.svg",alt:"menu-logo",layout:"responsive",width:20,height:20})})}):""]}),c?(0,g.jsx)("div",{className:"hidden desktop:flex desktop:ml-[-5vw]",children:(0,g.jsx)(j.zx,{onClick:function(){(0,m.signOut)()},variant:"outline",colorScheme:"linkedin",sx:{width:"6vw",height:"5vh",borderRadius:"1.2vh",marginRight:"2vw"},children:"Logout"})}):(0,g.jsx)("div",{className:"hidden desktop:flex desktop:ml-[-8vw]",children:(0,g.jsx)(l(),{href:"/login",children:(0,g.jsx)(j.zx,{variant:"outline",colorScheme:"linkedin",sx:{width:"6vw",height:"5vh",borderRadius:"1.2vh",marginRight:"2vw"},children:"Login"})})})]})})}},39499:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(77220).API_URL;a.exports={api_origin:d}},71210:function(a,b){"use strict";function c(a,b,c,d){return!1}Object.defineProperty(b,"__esModule",{value:!0}),b.getDomainLocale=c,("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&& void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},48418:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(39274).Z;c(25654).default,Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var e=c(12845).Z,f=c(38774).Z,g=e(c(67294)),h=c(76273),i=c(22725),j=c(63462),k=c(21018),l=c(57190),m=c(71210),n=c(98684),o=void 0!==g.default.useTransition,p={};function q(a,b,c,d){if(a&&h.isLocalURL(b)){a.prefetch(b,c,d).catch(function(a){});var e=d&& void 0!==d.locale?d.locale:a&&a.locale;p[b+"%"+c+(e?"%"+e:"")]=!0}}var r=g.default.forwardRef(function(a,b){var c,e,r=a.href,s=a.as,t=a.children,u=a.prefetch,v=a.passHref,w=a.replace,x=a.soft,y=a.shallow,z=a.scroll,A=a.locale,B=a.onClick,C=a.onMouseEnter,D=a.onTouchStart,E=a.legacyBehavior,F=void 0===E?!0!==Boolean(!1):E,G=f(a,["href","as","children","prefetch","passHref","replace","soft","shallow","scroll","locale","onClick","onMouseEnter","onTouchStart","legacyBehavior"]);c=t,F&&("string"==typeof c||"number"==typeof c)&&(c=g.default.createElement("a",null,c));var H=!1!==u,I=d(o?g.default.useTransition():[],2),J=I[1],K=g.default.useContext(j.RouterContext),L=g.default.useContext(k.AppRouterContext);L&&(K=L);var M=g.default.useMemo(function(){var a=d(h.resolveHref(K,r,!0),2),b=a[0],c=a[1];return{href:b,as:s?h.resolveHref(K,s):c||b}},[K,r,s]),N=M.href,O=M.as,P=g.default.useRef(N),Q=g.default.useRef(O);F&&(e=g.default.Children.only(c));var R=F?e&&"object"==typeof e&&e.ref:b,S=d(l.useIntersection({rootMargin:"200px"}),3),T=S[0],U=S[1],V=S[2],W=g.default.useCallback(function(a){(Q.current!==O||P.current!==N)&&(V(),Q.current=O,P.current=N),T(a),R&&("function"==typeof R?R(a):"object"==typeof R&&(R.current=a))},[O,R,N,V,T]);g.default.useEffect(function(){var a=U&&H&&h.isLocalURL(N),b=void 0!==A?A:K&&K.locale,c=p[N+"%"+O+(b?"%"+b:"")];a&&!c&&q(K,N,O,{locale:b})},[O,N,U,A,H,K]);var X={ref:W,onClick:function(a){F||"function"!=typeof B||B(a),F&&e.props&&"function"==typeof e.props.onClick&&e.props.onClick(a),a.defaultPrevented||function(a,b,c,d,e,f,g,i,j,k){if("A"!==a.currentTarget.nodeName.toUpperCase()||(!(m=(l=a).currentTarget.target)||"_self"===m)&&!l.metaKey&&!l.ctrlKey&&!l.shiftKey&&!l.altKey&&(!l.nativeEvent||2!==l.nativeEvent.which)&&h.isLocalURL(c)){a.preventDefault();var l,m,n=function(){"softPush"in b&&"softReplace"in b?b[f?e?"softReplace":"softPush":e?"replace":"push"](c):b[e?"replace":"push"](c,d,{shallow:g,locale:j,scroll:i})};k?k(n):n()}}(a,K,N,O,w,x,y,z,A,L?J:void 0)},onMouseEnter:function(a){F||"function"!=typeof C||C(a),F&&e.props&&"function"==typeof e.props.onMouseEnter&&e.props.onMouseEnter(a),h.isLocalURL(N)&&q(K,N,O,{priority:!0})},onTouchStart:function(a){F||"function"!=typeof D||D(a),F&&e.props&&"function"==typeof e.props.onTouchStart&&e.props.onTouchStart(a),h.isLocalURL(N)&&q(K,N,O,{priority:!0})}};if(!F||v||"a"===e.type&&!("href"in e.props)){var Y=void 0!==A?A:K&&K.locale,Z=K&&K.isLocaleDomain&&m.getDomainLocale(O,Y,K.locales,K.domainLocales);X.href=Z||n.addBasePath(i.addLocale(O,Y,K&&K.defaultLocale))}return F?g.default.cloneElement(e,X):g.default.createElement("a",Object.assign({},G,X),c)});b.default=r,("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&& void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},21018:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GlobalLayoutRouterContext=b.LayoutRouterContext=b.AppRouterContext=void 0;var d=(0,c(12845).Z)(c(67294)),e=d.default.createContext(null);b.AppRouterContext=e;var f=d.default.createContext(null);b.LayoutRouterContext=f;var g=d.default.createContext(null);b.GlobalLayoutRouterContext=g},47897:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return v},default:function(){return w}});var d=c(34727),e=c(14251),f=c(52875),g=c(34051),h=c.n(g),i=c(85893),j=c(48641),k=c(47741),l=c(56556),m=c(77220),n=c(67294),o=c(33299),p=c(84221),q=c(25675),r=c.n(q),s=c(39499);function t(a){a.product;var b=a.quantity,c=a.productPrice,d=(a.fetchCarts,a.productName),e=a.productImage;return a.status,a.city_name,(0,i.jsxs)("div",{className:"flex items-center h-[20vh] w-[100%] my-[3vh] rounded-[1vw] shadow-[0px_6px_20px_0px_rgba(0,28,47,0.05)]",children:[(0,i.jsx)("div",{className:"h-[11vh] w-[11vh] bg-black ml-[2vw]",children:(0,i.jsx)(r(),{unoptimized:!0,alt:"resep-logo",width:1,height:1,layout:"responsive",src:s.api_origin+e,loader:function(){return e}})}),(0,i.jsxs)("div",{className:"flex flex-col w-[40%] ml-[2vw]",children:[(0,i.jsx)("p",{children:d}),(0,i.jsxs)("p",{children:[b," Buah"]})]}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{children:["Rp. ",c.toLocaleString("id")]})})]})}var u=c(11163),v=!0,w=function(a){var b,c,g,q,s,v=(0,u.useRouter)(),w=a.transaction_details,x=a.transactions,y=a.user_id,z=(0,n.useState)(w.resFetchTransactionDetails),A=z[0];z[1];var B=(0,n.useState)(x.resFetchTransactions),C=B[0],D=B[1],E=(0,n.useState)(x.resFetchAddress),F=E[0];E[1];var G,H,I=(0,n.useState)({}),J=I[0],K=I[1],L=function(a){K(a.target.files[0])},M=(0,p.pm)();F.forEach((G=(0,d.Z)(h().mark(function a(d){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b=d.recipient,c=d.addressDetail,g=d.postalCode,q=d.province,s=d.city_name;case 5:case"end":return a.stop()}},a)})),function(a){return G.apply(this,arguments)}));var N,O,P=(H=(0,d.Z)(h().mark(function a(){var b,c,d,g,i,j,k,l;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,o.getSession)();case 3:return c=(b=a.sent).user.user_token,(d=new FormData).append("paymentProof",J),g=C.transaction_id,i={transStatus:"awaiting_payment_confirmation",trans:C},console.log(i),j={headers:{Authorization:"Bearer ".concat(c)}},a.next=13,m.default.patch("/transactions/paymentProof/".concat(g),d,j);case 13:return k=a.sent,a.next=16,m.default.patch("/transactions/patchTransaction",i,j);case 16:l=a.sent,D((0,f.Z)((0,e.Z)({},C),{status:"awaiting_payment_confirmation"})),M({description:k.data.message,position:"top",status:"success",duration:3e3,isClosable:!0}),setTimeout(function(){v.replace("/transaction/".concat(y))},1e3),a.next=26;break;case 22:a.prev=22,a.t0=a.catch(0),console.log({error:a.t0}),M({description:"Bukti Pembayaran Belum Dipilih",position:"top",status:"error",duration:3e3,isClosable:!0});case 26:case"end":return a.stop()}},a,null,[[0,22]])})),function(){return H.apply(this,arguments)}),Q=(N=(0,d.Z)(h().mark(function a(){var b,c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,b=C.transaction_id,a.next=4,m.default.patch("/transactions/cancelTransaction/".concat(b));case 4:c=a.sent,D((0,f.Z)((0,e.Z)({},C),{status:"order_cancelled"})),alert(c.data.message),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(0),console.log({Error:Error}),alert(null===(d=a.t0.response)|| void 0===d?void 0:d.data.message);case 14:case"end":return a.stop()}},a,null,[[0,9]])})),function(){return N.apply(this,arguments)}),R=(O=(0,d.Z)(h().mark(function a(){var b,c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,b=C.transaction_id,a.next=4,m.default.patch("/transactions/confirmTransaction/".concat(b));case 4:c=a.sent,D((0,f.Z)((0,e.Z)({},C),{status:"order_confirmed"})),alert(c.data.message),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(0),console.log({Error:Error}),alert(null===(d=a.t0.response)|| void 0===d?void 0:d.data.message);case 14:case"end":return a.stop()}},a,null,[[0,9]])})),function(){return O.apply(this,arguments)}),S=C.totalPrice+C.deliveryCost,T=C.status.split("_");return(0,i.jsxs)("div",{className:"w-[100vw] h-[100vh]",children:[(0,i.jsx)(l.Z,{}),(0,i.jsxs)("div",{className:"w-[100%] h-[100%] flex",children:[(0,i.jsx)("div",{className:"w-[50%]",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-[1rem] font-[500] ml-3",children:"Alamat Lengkap"}),(0,i.jsx)("br",{}),(0,i.jsxs)("p",{children:["Nama Pembeli : ",b]}),(0,i.jsxs)("p",{children:["Alamat Pembeli : ",c]}),(0,i.jsxs)("p",{children:["Provinsi : ",q]}),(0,i.jsxs)("p",{children:["Kota: ",s]}),(0,i.jsxs)("p",{children:["Kode Pos : ",g]}),(0,i.jsx)("br",{}),(0,i.jsx)("p",{className:"text-[1rem] font-[500] ml-3",children:"Daftar Pesanan"}),(0,i.jsx)("div",{children:A.map(function(b,c){return(0,i.jsx)(t,{productName:b.product.productName,productImage:b.product.productImage,productPrice:b.product.productPrice,quantity:b.quantity,props:a},b.transaction_details_id)})})]})}),(0,i.jsx)("div",{className:"border-l-[1px] mt-[2vh] border-solid border-gray h-[100%]"}),(0,i.jsxs)("div",{className:"w-[50%] ",children:[(0,i.jsx)("p",{className:"w-[30%] ml-3 mt-3 text-[1rem] font-[500]",children:"Ringkasan Pembayaran"}),(0,i.jsxs)("p",{className:"mt-[5vh] ml-[10%] text-[1rem] font-[500]",children:["Metode Pengiriman: ",C.courier]}),(0,i.jsxs)("p",{className:"mt-[5vh] ml-[10%] text-[1rem] font-[500]",children:["Sub Total: Rp. ",C.totalPrice.toLocaleString("id")]}),(0,i.jsxs)("p",{className:"mt-[5vh] ml-[10%] text-[1rem] font-[500]",children:["Delivery Cost: Rp. ",C.deliveryCost.toLocaleString("id")]}),(0,i.jsxs)("p",{className:"mt-[5vh] ml-[10%] text-[1rem] font-[500]",children:["Total Harga: Rp. ",S.toLocaleString("id")]}),(0,i.jsx)("p",{className:"mt-[5vh] ml-[10%] text-[1rem] font-[500]",children:"Metode Pembayaran: Transfer Bank BCA"}),(0,i.jsx)(j.gC,{align:"start",marginTop:6,marginBottom:6,marginLeft:16,children:(0,i.jsx)(r(),{src:"/profile/line.png",width:430,height:2})}),(0,i.jsxs)("p",{className:" ml-[10%] text-[1rem] font-[500]",children:["Status Pembayaran: ",T.join(" ")]}),"awaiting_payment"==C.status?(0,i.jsxs)(j.gC,{align:"start",children:[(0,i.jsx)(j.gC,{marginBottom:3,marginTop:8,marginLeft:32,children:(0,i.jsx)("input",{type:"file",onChange:L})}),(0,i.jsx)(j.gC,{paddingLeft:28,children:(0,i.jsx)(k.zx,{onClick:P,colorScheme:"linkedin",children:"Unggah Bukti Pembayaran"})})]}):null,(0,i.jsx)(j.gC,{align:"start",children:(0,i.jsxs)(j.gC,{marginBottom:3,marginTop:8,marginLeft:32,children:[(0,i.jsx)(k.zx,{variant:"outline",colorScheme:"green",onClick:R,children:"Konfirmasi Penerimaan"}),(0,i.jsx)(k.zx,{variant:"outline",colorScheme:"red",onClick:Q,children:"Batalkan Pesanan"})]})})]})]})]})}},77220:function(a,b,c){"use strict";c.r(b),c.d(b,{API_URL:function(){return f}});var d=c(9669),e=c.n(d),f="http://localhost:8000",g=e().create({baseURL:f});b.default=g},41664:function(a,b,c){a.exports=c(48418)},11163:function(a,b,c){a.exports=c(90387)},52875:function(a,b,c){"use strict";function d(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}c.d(b,{Z:function(){return d}})}},function(a){a.O(0,[357,675,228,774,888,179],function(){var b;return a(a.s=30904)}),_N_E=a.O()}])