(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[866],{31677:function(a,b,c){"use strict";c.d(b,{B1:function(){return i}});var d=c(31940),e=c(38554),f=c.n(e);function g(a){return"function"==typeof a}var h=a=>function(...b){let c=[...b],e=b[b.length-1];return(0,d.gk)(e)&&c.length>1?c=c.slice(0,c.length-1):e=a,(function(...a){return b=>a.reduce((a,b)=>b(a),b)})(...c.map(a=>b=>g(a)?a(b):j(b,a)))(e)},i=h(d.rS);function j(...a){return f()({},...a,k)}function k(a,b,c,d){if((g(a)||g(b))&&Object.prototype.hasOwnProperty.call(d,c))return(...c)=>{let d=g(a)?a(...c):a,e=g(b)?b(...c):b;return f()({},d,e,k)}}h(d.wE)},49286:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/transaksi",function(){return c(403)}])},52522:function(a,b,c){"use strict";var d=c(85893);c(67294);var e=c(25675),f=c.n(e),g=c(41664),h=c.n(g),i=c(33299);b.Z=function(a){var b=a.path;return(0,d.jsxs)("div",{className:"h-[100%] w-[15%] flex flex-col items-center bg-[#008DEB]",children:[(0,d.jsx)("div",{id:"logo",className:"w-[70%] my-[5vh]",children:(0,d.jsx)(f(),{src:"/admin/AdminNavbarVector.svg",alt:"medbox-logo",layout:"responsive",width:136,height:32})}),(0,d.jsx)("div",{className:"w-[100%] h-[25%] text-white",children:["Transaksi","Inventory","Laporan","Resep"].map(function(a){return(0,d.jsx)(h(),{href:"/admin/".concat(a.toLowerCase()),children:(0,d.jsxs)("div",{className:b.includes(a.toLowerCase())?"w-[100%] bg-[#005E9D] hover:cursor-pointer h-[33.3%] flex items-center":"w-[100%] bg-[#008DEB] hover:cursor-pointer h-[33.3%] flex items-center",children:[(0,d.jsx)("div",{className:"w-[10%] ml-[2vw]",children:(0,d.jsx)(f(),{src:"/admin/".concat(a,".svg"),alt:"medbox-logo",layout:"responsive",width:24,height:24})}),(0,d.jsx)("p",{className:"ml-[.5vw]",children:a})]})},a)})}),(0,d.jsx)("div",{className:"grow"}),(0,d.jsxs)("button",{onClick:function(){(0,i.signOut)()},className:"border-[1px] w-[80%] h-[6%] border-white text-white flex items-center justify-evenly mb-[3vh]",children:[(0,d.jsx)("div",{className:"w-[7%]",children:(0,d.jsx)(f(),{src:"/admin/LogoutAdmin.svg",alt:"medbox-logo",layout:"responsive",width:16,height:14})}),"Logout"]})]})}},12703:function(a,b,c){"use strict";var d=(0,c(31677).B1)({fonts:{heading:"'Poppins', sans-serif",body:"'Poppins', sans-serif"}});b.Z=d},39499:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(77220).API_URL;a.exports={api_origin:d}},403:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return G},default:function(){return H}});var d=c(34727),e=c(67573),f=c(14251),g=c(52875),h=c(34051),i=c.n(h),j=c(85893),k=c(52522),l=c(11163),m=c(43699),n=c(48641),o=c(57026),p=c(20979),q=c(47741),r=c(22220),s=c(23887),t=c(33299),u=c(67294),v=c(39653),w=c(25675),x=c.n(w),y=c(33713),z=c(39499),A=function(a){var b=a.isOpen,c=a.onClose,d=a.key,e=a.trans_id,f=a.transaction_details,g=a.totalPrice,h=a.status,i=a.courier,k=a.deliveryCost,l=a.createdAt,m=h.split("_");return(0,j.jsxs)(y.u_,{isOpen:b,onClose:c,children:[(0,j.jsx)(y.ZA,{}),(0,j.jsxs)(y.hz,{backgroundColor:"white",paddingTop:4,paddingBottom:9,paddingX:5,maxWidth:480,children:[(0,j.jsx)(y.xB,{fontWeight:600,fontSize:20,children:"Detail Transaksi"}),(0,j.jsx)(y.ol,{margin:5}),(0,j.jsx)(y.fe,{children:(0,j.jsxs)(n.gC,{align:"start",fontWeight:400,fontSize:15,children:[(0,j.jsxs)(n.xv,{children:["Status : ",m.join(" ")]}),(0,j.jsxs)(n.xv,{children:["No. Invoice : ",e]}),(0,j.jsxs)(n.xv,{children:["Kurir : ",i.toUpperCase()]}),(0,j.jsxs)(n.xv,{paddingBottom:4,children:["Tanggal Pemesanan : ",l.slice(0,10)]}),(0,j.jsx)(n.xv,{paddingBottom:4,fontWeight:500,children:"Detail Produk"}),null==f?void 0:f.map(function(a,b){var c=a.quantity*a.product.productPrice;return(0,j.jsx)(n.gC,{align:"start",children:(0,j.jsxs)(n.Ug,{children:[(0,j.jsx)(n.gC,{marginLeft:7,marginRight:8,marginBottom:4,children:(0,j.jsx)(x(),{unoptimized:!0,alt:"resep-logo",width:70,height:70,src:z.api_origin+a.product.productImage})}),(0,j.jsxs)(n.gC,{align:"start",paddingBottom:5,fontSize:13,children:[(0,j.jsxs)(n.xv,{children:[" ",a.product.productName]}),(0,j.jsxs)(n.Ug,{children:[(0,j.jsx)(n.xv,{children:a.quantity}),(0,j.jsx)(n.xv,{children:"x"}),(0,j.jsxs)(n.xv,{children:["Rp ",a.product.productPrice.toLocaleString("id")]}),(0,j.jsx)(n.xv,{children:"= "}),(0,j.jsxs)(n.xv,{children:["Rp ",c.toLocaleString("id")]})]})]})]})},d)}),(0,j.jsx)(n.xv,{fontWeight:500,paddingTop:4,paddingBottom:2,children:"Rincian Pembayaran :"}),(0,j.jsxs)(n.xv,{children:["Sub Total: Rp ",g.toLocaleString("id")]}),(0,j.jsxs)(n.xv,{children:["Biaya Pengiriman: Rp ",k.toLocaleString("id")]}),(0,j.jsxs)(n.xv,{fontWeight:500,paddingTop:2,children:["Total: Rp ",(k+g).toLocaleString("id")]})]})})]})]})};function B(a){var b=a.key,c=a.trans_id,d=a.transaction_details,e=a.productName,f=a.totalPrice,g=a.status,h=a.productImage,i=a.courier,k=a.deliveryCost,l=a.createdAt,m=(0,v.qY)(),o=m.isOpen,p=m.onOpen,r=m.onClose,s=g.split("_");return(0,j.jsxs)(n.xu,{children:[(0,j.jsxs)(n.xv,{fontWeight:600,marginBottom:1,marginLeft:"81",children:["No. Invoice: ",c]}),(0,j.jsxs)(n.Ug,{bg:"gray.50",height:125,spacing:"120",marginBottom:3,ml:"70",px:8,rounded:6,boxShadow:"md",children:[(0,j.jsx)(x(),{unoptimized:!0,alt:"resep-logo",width:70,height:70,src:z.api_origin+h}),(0,j.jsxs)(n.gC,{children:[(0,j.jsx)(n.xv,{w:"200px",fontSize:16,fontWeight:600,children:e}),(0,j.jsxs)(n.xv,{w:"200px",fontSize:14,fontWeight:450,children:["Total Harga: Rp. ",(k+f).toLocaleString("id")]}),(0,j.jsxs)(q.zx,{color:"linkedin.500",variant:"link",paddingRight:95,fontSize:13,fontWeight:500,onClick:p,children:["Detail Transaksi",(0,j.jsx)(A,{isOpen:o,onClose:r,transaction_details:d,productName:e,productImage:h,status:g,totalPrice:f,trans_id:c,courier:i,deliveryCost:k,createdAt:l,props:a},b)]})]}),(0,j.jsxs)(n.xu,{w:"200px",fontSize:"15",fontWeight:500,children:["Status: ",s.join(" ")]}),(0,j.jsxs)(n.gC,{textAlign:"center",fontWeight:500,children:[(0,j.jsx)(n.xv,{w:"160px",fontSize:"14",children:"Tanggal Pemesanan:"}),(0,j.jsx)(n.xv,{w:"150px",fontSize:"13",children:l.slice(0,10)})]})]})]})}var C=c(84221),D=c(77220);function E(a){var b,c,e=a.trans_id,f=a.productName,g=a.totalPrice,h=a.status,k=a.productImage,l=a.courier,m=a.deliveryCost,o=a.transaction_details,p=a.createdAt,r=a.fetchTransactions,s=(0,v.qY)(),t=s.isOpen,u=s.onOpen,w=s.onClose,y=(0,C.pm)(),B=(b=(0,d.Z)(i().mark(function a(){var b,c;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.default.patch("/transactions/adminConfirmDeliver/".concat(e));case 3:b=a.sent,r(),y({description:b.data.message,position:"top",status:"success",duration:3e3,isClosable:!0}),a.next=13;break;case 8:a.prev=8,a.t0=a.catch(0),console.log({Error:Error}),alert(null===(c=a.t0.response)|| void 0===c?void 0:c.data.message);case 13:case"end":return a.stop()}},a,null,[[0,8]])})),function(){return b.apply(this,arguments)}),E=(c=(0,d.Z)(i().mark(function a(){var b,c;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.default.patch("/transactions/adminCancelOrder/".concat(e));case 3:b=a.sent,r(),y({description:b.data.message,position:"top",status:"success",duration:3e3,isClosable:!0}),a.next=13;break;case 8:a.prev=8,a.t0=a.catch(0),console.log({Error:Error}),alert(null===(c=a.t0.response)|| void 0===c?void 0:c.data.message);case 13:case"end":return a.stop()}},a,null,[[0,8]])})),function(){return c.apply(this,arguments)}),F=h.split("_");return(0,j.jsxs)(n.xu,{children:[(0,j.jsxs)(n.xv,{fontWeight:600,marginBottom:1,marginLeft:"81",children:["No. Invoice: ",e]}),(0,j.jsxs)(n.Ug,{bg:"gray.50",height:125,spacing:"50",marginBottom:3,ml:"70",px:8,rounded:6,boxShadow:"md",children:[(0,j.jsx)(x(),{unoptimized:!0,alt:"resep-logo",width:70,height:70,src:z.api_origin+k}),(0,j.jsxs)(n.gC,{children:[(0,j.jsx)(n.xv,{w:"200px",fontSize:16,fontWeight:600,children:f}),(0,j.jsxs)(n.xv,{w:"200px",fontSize:14,fontWeight:450,children:["Total Harga: Rp. ",g.toLocaleString("id")]}),(0,j.jsxs)(q.zx,{color:"linkedin.500",variant:"link",paddingRight:95,fontSize:13,fontWeight:500,onClick:u,children:["Detail Transaksi",(0,j.jsx)(A,{isOpen:t,onClose:w,productName:f,productImage:k,status:h,totalPrice:g,trans_id:e,courier:l,transaction_details:o,deliveryCost:m,createdAt:p,props:a},e)]})]}),(0,j.jsxs)(n.xu,{w:"200px",fontSize:"15",fontWeight:500,children:["Status: ",F.join(" ")]}),(0,j.jsxs)(n.gC,{textAlign:"center",fontWeight:500,children:[(0,j.jsx)(n.xv,{w:"160px",fontSize:"14",children:"Tanggal Pemesanan:"}),(0,j.jsx)(n.xv,{w:"150px",fontSize:"13",children:p.slice(0,10)})]}),(0,j.jsxs)(n.gC,{textAlign:"center",fontWeight:500,children:[(0,j.jsx)(q.zx,{variant:"outline",colorScheme:"green",width:180,fontSize:14,onClick:B,children:"Konfirmasi Pesanan"}),(0,j.jsx)(q.zx,{variant:"outline",colorScheme:"red",width:180,fontSize:14,onClick:E,children:"Batalkan Pesanan"})]})]})]})}var F=c(12703),G=!0,H=function(a){var b=function(){return null==J?void 0:J.map(function(b){return(0,j.jsx)(B,{productName:b.transaction_details[0].product.productName,productImage:b.transaction_details[0].product.productImage,transaction_details:b.transaction_details,status:b.status,totalPrice:b.totalPrice,trans_id:b.transaction_id,courier:b.courier,deliveryCost:b.deliveryCost,createdAt:b.createdAt,transac:h,props:a},b.transaction_id)})},c=(0,u.useState)([]),h=c[0],v=c[1],w=(0,u.useState)(0),x=w[0],y=w[1],z=(0,u.useState)(1),A=z[0],C=z[1],G=(0,u.useState)(3),H=G[0];G[1];var I=(0,u.useState)([]),J=I[0],K=I[1],L=(0,u.useState)({InvoiceID:""}),M=L[0],N=L[1],O=(0,l.useRouter)(),P=(0,t.useSession)();P.data&&!P.data.user.user.isAdmin&&O.replace("/");var Q=O.pathname;(0,u.useEffect)(function(){Z()},[x,A]);var R,S=function(){C(A-1)},T=function(){C(A+1)},U=function(a){N((0,g.Z)((0,f.Z)({},M),(0,e.Z)({},a.target.name,a.target.value)))},V=function(){var a=M.invoiceID;""==M.invoiceID&&(a="undefined"),Z("transaction_id","DESC",a)},W=function(a){var b=a.target.value;switch(b){case"ascInvoice":Z(X="transaction_id",Y="ASC");break;case"descInvoice":Z(X="transaction_id",Y="DESC");break;case"ascDate":Z(X="createdAt",Y="ASC");break;case"descDate":Z(X="createdAt",Y="DESC")}},X="transaction_id",Y="ASC",Z=(R=(0,d.Z)(i().mark(function a(b,c,d){var e,f,g,h;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,t.getSession)();case 3:return f=(e=a.sent).user.user_token,g={params:{page:A,pageSize:H},headers:{Authorization:"Bearer ".concat(f)}},a.next=8,D.default.get("/transactions/admin/transactionsByIndex/".concat(x,"?order_by=").concat(b,"&ordered_method=").concat(c,"&transaction=").concat(d),g);case 8:v((h=a.sent).data.data.resFetchTransactions),K(h.data.data.resFetchTransactions),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),alert(a.t0.message);case 16:case"end":return a.stop()}},a,null,[[0,13]])})),function(a,b,c){return R.apply(this,arguments)});return(0,j.jsx)(m.xjn,{theme:F.Z,children:(0,j.jsxs)("div",{className:"flex w-[100vw] h-[100vh]",children:[(0,j.jsx)(k.Z,{path:Q}),(0,j.jsxs)(n.gC,{align:"start",children:[(0,j.jsx)(n.xu,{children:(0,j.jsxs)(n.Ug,{children:[(0,j.jsx)(n.xv,{fontSize:21,fontWeight:500,marginTop:3,marginLeft:16,marginRight:310,children:"Riwayat Transaksi"}),(0,j.jsxs)(n.Ug,{paddingTop:6,paddingRight:70,fontSize:15,children:[(0,j.jsx)(n.xv,{children:"Urutkan"}),(0,j.jsxs)(o.Ph,{name:"sortBy",width:180,marginTop:4,onChange:W,fontSize:14,children:[(0,j.jsx)("option",{value:"ascInvoice",children:"No. Invoice Terlama"}),(0,j.jsx)("option",{value:"descInvoice",children:"No. Invoice Terbaru"}),(0,j.jsx)("option",{value:"ascDate",children:"Transaksi Terlama"}),(0,j.jsx)("option",{value:"descDate",children:"Transaksi Terbaru"})]})]}),(0,j.jsxs)(n.Ug,{paddingTop:4,children:[(0,j.jsx)(p.II,{marginTop:2,name:"invoiceID",type:"text",placeholder:"No. Invoice",fontSize:14,fontWeight:400,onChange:U,width:200}),(0,j.jsx)(n.Ug,{paddingTop:2,children:(0,j.jsx)(q.zx,{fontSize:14,colorScheme:"messenger",onClick:V,children:"Cari"})})]})]})}),(0,j.jsxs)(r.mQ,{onChange:function(a){y(a),C(1)},children:[(0,j.jsxs)(r.td,{marginLeft:16,marginTop:2,children:[(0,j.jsx)(r.OK,{children:"Semua"}),(0,j.jsx)(r.OK,{children:"Diproses"}),(0,j.jsx)(r.OK,{children:"Sedang Dikirim"}),(0,j.jsx)(r.OK,{children:"Berhasil"}),(0,j.jsx)(r.OK,{children:"Tidak Berhasil"}),(0,j.jsx)(r.OK,{children:"Menunggu Pembayaran"}),(0,j.jsx)(r.OK,{children:"Menunggu Konfirmasi Pembayaran"})]}),h.length?(0,j.jsxs)(r.nP,{children:[(0,j.jsx)(r.x4,{children:(0,j.jsx)("div",{children:b()})}),(0,j.jsx)(r.x4,{children:(0,j.jsx)("div",{children:null==J?void 0:J.map(function(b){return(0,j.jsx)(E,{productName:b.transaction_details[0].product.productName,productImage:b.transaction_details[0].product.productImage,transaction_details:b.transaction_details,status:b.status,totalPrice:b.totalPrice,trans_id:b.transaction_id,courier:b.courier,deliveryCost:b.deliveryCost,createdAt:b.createdAt,transac:h,fetchTransactions:Z,props:a},b.transaction_id)})})}),(0,j.jsx)(r.x4,{children:(0,j.jsx)("div",{children:b()})}),(0,j.jsx)(r.x4,{children:(0,j.jsx)("div",{children:b()})}),(0,j.jsx)(r.x4,{children:(0,j.jsx)("div",{children:b()})}),(0,j.jsx)(r.x4,{children:(0,j.jsx)("div",{children:b()})}),(0,j.jsx)(r.x4,{children:(0,j.jsx)("div",{children:b()})})]}):(0,j.jsxs)(n.gC,{marginTop:105,children:[(0,j.jsx)(s.Ee,{src:"/admin/Empty-Transaction.png",width:250,height:250}),(0,j.jsx)(n.xv,{paddingTop:6,fontSize:18,children:"Tidak Ada Transaksi"})]})]}),h.length?(0,j.jsxs)(n.Ug,{paddingLeft:510,children:[(0,j.jsx)(q.zx,{marginRight:2,onClick:S,isDisabled:1==A,colorScheme:"messenger",children:"Prev"}),(0,j.jsx)(n.xv,{paddingRight:2,children:A}),(0,j.jsx)(q.zx,{onClick:T,isDisabled:A>=h.length,colorScheme:"messenger",children:"Next"})]}):null]})]})})}},77220:function(a,b,c){"use strict";c.r(b),c.d(b,{API_URL:function(){return f}});var d=c(9669),e=c.n(d),f="http://localhost:8000",g=e().create({baseURL:f});b.default=g},11163:function(a,b,c){a.exports=c(90387)}},function(a){a.O(0,[357,675,228,706,478,220,774,888,179],function(){var b;return a(a.s=49286)}),_N_E=a.O()}])